package com.digi3studio {	import asset.CardBackgroundImage;	import com.fastframework.core.FASTEventDispatcher;	import flash.display.BitmapData;	import flash.display.Sprite;	import flash.geom.Matrix;	import flash.utils.ByteArray;	/**	 * @author Digi3Studio - Colin Leung	 * compose the background;	 */	public class PhotoComposition extends FASTEventDispatcher {		private var composition:ByteArray;		private var imgEncoder:IBitmapDataEncoder;		public function PhotoComposition(imgEncoder:IBitmapDataEncoder) {			this.imgEncoder = imgEncoder;		}		public function composeAsByteArray(mcPreview : Sprite, metaData : Object) : ByteArray {//			var bdCard:BitmapData = new BitmapData(1020,627,false,0xFAA600);			var bdCard:BitmapData = new BitmapData(AppConfig.CARD_SIZE_WIDTH,AppConfig.CARD_SIZE_HEIGHT,true,0xFAA600);			var tmx:Matrix = new Matrix();			tmx.scale(AppConfig.CARD_SIZE_SCALE,AppConfig.CARD_SIZE_SCALE);			bdCard.draw(new CardBackgroundImage());			bdCard.draw(mcPreview,tmx,null,null,null,true);			composition = imgEncoder.encode(bdCard,metaData);			return composition;		}				public function getCompositionByteArray():ByteArray{			return composition;		}	}}